% Copyright 2014 by Thierry Onkelinx
%
% This file may be distributed and/or modified
%
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
%
% See the file doc/licenses/LICENSE for more details.
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerthemevlaanderen2015}

%\setbeamertemplate{background}{\includegraphics[width=\paperwidth,height=\paperheight,keepaspectratio]{tussenslide.pdf}}

\def\lang#1{\def\@lang{#1}}
\lang{english}

\def\coverhorizontal#1{\def\@coverhorizontal{#1}}
\coverhorizontal{TRUE}

\def\cover#1{\def\@cover{#1}}
\cover{fietskader.jpg}

\def\coveroffset#1{\def\@coveroffset{#1}}
\coveroffset{0mm}

\def\coverhoffset#1{\def\@coverhoffset{#1}}
\coverhoffset{0mm}

\def\website#1{\def\@website{#1}}
\website{}

% source rgb colours: level 1
\definecolor{main.colour}{RGB}{255, 235, 0}
\definecolor{frametitle.colour}{RGB}{60, 61, 60}
\definecolor{support.colour}{RGB}{240, 215, 15}
% source rgb colours: level 2, palet 7
\definecolor{box.colour.title}{RGB}{255, 255, 255}
\definecolor{box.colour.body}{RGB}{50, 178, 233}
\definecolor{box.colour}{RGB}{21, 70, 91}
\definecolor{alert.colour.title}{RGB}{255, 255, 255}
\definecolor{alert.colour.body}{RGB}{213, 62, 94}
\definecolor{alert.colour}{RGB}{134, 38, 59}
\definecolor{example.colour.title}{RGB}{255, 255, 255}
\definecolor{example.colour.body}{RGB}{163, 204, 0}
\definecolor{example.colour}{RGB}{111, 139, 0}

\RequirePackage[absolute, overlay]{textpos}
\setlength{\TPHorizModule}{1mm}
\setlength{\TPVertModule}{\TPHorizModule}
\textblockorigin{0mm}{0mm}

\RequirePackage{pgf}

\RequirePackage{etoolbox}

\newcommand{\readcover}[2]{%
  \edef\coverhorizontal{{#1}}%
  \expandafter\ifstrequal\coverhorizontal{TRUE}{
    \pgfdeclareimage[width = 124.5mm, interpolate = true]{afbeelding}{#2}
  }{
    \pgfdeclareimage[height = 96mm, interpolate = true]{afbeelding}{#2}
  }%
}

\RequirePackage{inboimage_2015}

% define font sizes
\newcommand{\titlefontsize}{\fontsize{28pt}{33.6pt}\selectfont}
\newcommand{\subtitlefontsize}{\fontsize{21pt}{25.2pt}\selectfont}
\newcommand{\authorfontsize}{\fontsize{10pt}{12pt}\selectfont}
\newcommand{\datefontsize}{\fontsize{8pt}{9.6pt}\selectfont}
\newcommand{\institutefontsize}{\fontsize{8pt}{9.6pt}\selectfont}
\newcommand{\websitefontsize}{\fontsize{7pt}{8pt}\selectfont}
\newcommand{\sectionfontsize}{\fontsize{28pt}{33.6pt}\selectfont}
\newcommand{\subsectionfontsize}{\fontsize{10pt}{12pt}\selectfont}

% defines fonts
\RequirePackage{ifxetex}

\ifxetex
  \RequirePackage[no-math]{fontspec}
  \setmainfont[Ligatures=TeX]{Calibri}
  \setmonofont{Courier New}
\else
  \RequirePackage[T1]{fontenc}
  \RequirePackage[utf8]{inputenc}
  \RequirePackage{lmodern}
\fi
\usefonttheme{serif}

\frenchspacing

% set fonts for different elements
\usetheme{Pittsburgh}
\usecolortheme[named=support.colour]{structure}

\setbeamercolor{title}{fg=white}
\setbeamerfont{title}{size = \titlefontsize, series = \bfseries}

\setbeamercolor{subtitle}{fg=white}
\setbeamerfont{subtitle}{size = \subtitlefontsize, series = \bfseries}

\setbeamerfont{frametitle}{series = \bfseries, size = \large}
\setbeamercolor{frametitle}{bg=,fg=frametitle.colour}

\setbeamercolor{author}{fg=white}
\setbeamerfont{author}{size = \authorfontsize}

\setbeamercolor{date}{fg=white}
\setbeamerfont{date}{size = \datefontsize}

\setbeamercolor{institute}{fg=white}
\setbeamerfont{institute}{size = \institutefontsize}

\setbeamerfont{sidebar}{size = \websitefontsize, series = \bfseries}
\setbeamercolor{sidebar}{fg = frametitle.colour, bg = white}

\setbeamerfont{section title}{size = \sectionfontsize, series = \bfseries}
\setbeamercolor{section title}{fg = frametitle.colour, bg = main.colour}

\setbeamerfont{subsection title}{size = \subsectionfontsize, series = \bfseries}
\setbeamercolor{subsection title}{fg = frametitle.colour, bg = main.colour}

\setbeamerfont{section in toc}{size = \normalsize, series = \normalfont}
\setbeamercolor{section in toc}{fg = frametitle.colour}
\setbeamertemplate{section in toc}[square]

\setbeamerfont{subsection in toc}{size = \small, series = \normalfont}
\setbeamercolor{subsection in toc}{fg = frametitle.colour}
\setbeamertemplate{subsection in toc}[square]

\setbeamertemplate{itemize items}[triangle]
\setbeamertemplate{enumerate items}[square]

\setbeamercolor{block title}{fg=box.colour.title, bg=box.colour}
\setbeamercolor{block body}{bg = box.colour}
\setbeamerfont{block title}{series = \bfseries}

\setbeamercolor{block title alerted}{fg=alert.colour.title, bg=alert.colour}
\setbeamercolor{block body alerted}{bg = alert.colour.body}
\setbeamerfont{block title alerted}{series = \bfseries}

\setbeamercolor{block title example}{fg=example.colour.title, bg=example.colour}
\setbeamercolor{block body example}{bg = example.colour.body}
\setbeamerfont{block title example}{series = \bfseries}

\setbeamercolor{title in head/foot}{fg=frametitle.colour}

% define title page
\setbeamertemplate{title page}{
  \begin{textblock}{124.5}(3.5, 0)
    \readcover{\@coverhorizontal}{\@cover}
    \begin{pgftranslate}{\pgfpoint{\@coverhoffset}{\@coveroffset}}
      \pgfuseimage{afbeelding}
    \end{pgftranslate}
  \end{textblock}

  \begin{textblock}{3.5}(0, 0)
    \begin{pgfpicture}{0cm}{0cm}{3.5mm}{96mm}
      \color{white}
      \pgfrect[fill]{\pgfpoint{0mm}{0mm}}{\pgfpoint{3.5mm}{96mm}}
    \end{pgfpicture}
  \end{textblock}

  \begin{textblock}{2.9}(1.2, 78)
    {\usebeamerfont{sidebar}\usebeamercolor[fg]{sidebar}\rotatebox{90}{\@website}}
  \end{textblock}

  \begin{textblock}{84}(18.1, 6)
    \begin{minipage}[b][50mm][b]{78mm}
      \noindent
      \raggedright
      {\usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle}\\
      {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle}
    \end{minipage}
  \end{textblock}

  \begin{textblock}{104}(18.1, 58.1)
     {\usebeamerfont{date}\usebeamercolor[fg]{date}\insertdate}~\\
     \vspace{5mm}
     \raggedright {\usebeamerfont{author}\usebeamercolor[fg]{author}\insertauthor}

     {\usebeamerfont{institute}\usebeamercolor[fg]{institute}\insertinstitute}
  \end{textblock}

  \begin{textblock}{14}(109.9, -.2)
    \begin{center}
      \includegraphics[width = 12.7mm]{vlaanderen_en_verticaal.eps}
    \end{center}
  \end{textblock}
}

\setbeamertemplate{frametitle}{
  \vspace{3mm}\raggedright {\usebeamerfont{frame title}\usebeamercolor[fg]{frame title}\insertframetitle}

  {\small \insertframesubtitle}
}

\setbeamertemplate{sidebar left}{
  \vspace{81.9mm}
  \hspace{9.2mm}
  \includegraphics[width = 24.5mm]{vlaanderen_en_naakt}

  \begin{textblock}{4}(0, 0)
    \begin{pgfpicture}{0cm}{0cm}{3.5mm}{96mm}
      \usebeamercolor[bg]{sidebar}
      \pgfrect[fill]{\pgfpoint{0mm}{0mm}}{\pgfpoint{4mm}{96mm}}
    \end{pgfpicture}
  \end{textblock}

  \begin{textblock}{2.9}(1.2, 78)
    {\usebeamerfont{sidebar}\usebeamercolor[fg]{sidebar}\rotatebox{90}{\@website}}
  \end{textblock}

  \begin{textblock}{4}(4, 0)
    \begin{pgfpicture}{0cm}{0cm}{3.5mm}{96mm}
      \color{main.colour}
      \pgfrect[fill]{\pgfpoint{0mm}{0mm}}{\pgfpoint{4.1mm}{96mm}}
    \end{pgfpicture}
  \end{textblock}
}

% define section

\setbeamertemplate{section page}{
  \begin{textblock}{150}(4, 1.6)
    \begin{pgfpicture}{0cm}{0cm}{120mm}{90mm}
      \pgfmoveto{\pgfpoint{0mm}{0mm}}
      \pgflineto{\pgfpoint{0mm}{87.5mm}}
      \pgflineto{\pgfpoint{94.8mm}{87.5mm}}
      \pgflineto{\pgfpoint{119.7mm}{0mm}}
      \pgfclip
      \color{main.colour}
      % \color{magenta}
     \pgfrect[fill]{\pgfpoint{0mm}{0mm}}{\pgfpoint{119.7mm}{87.5mm}}
      % \pgfgrid[stepx = 1mm, stepy = 1mm]{\pgfpoint{0mm}{0mm}}{\pgfpoint{119.7mm}{87.5mm}}
    \end{pgfpicture}
  \end{textblock}

  \begin{textblock}{29.2}(7.5, 7.5)
    \includegraphics[width = 12.7mm]{vlaanderen_en_verticaal.eps}
  \end{textblock}

  \begin{textblock}{66}(36, 32)
    \begin{minipage}[b][29mm][b]{65mm}
      \noindent
      \raggedright{\usebeamerfont{section title}\usebeamercolor[fg]{section title}\insertsection}
    \end{minipage}
  \end{textblock}
}

% define subsection

\setbeamertemplate{subsection page}{
  \begin{textblock}{150}(4, 1.6)
    \begin{pgfpicture}{0cm}{0cm}{120mm}{90mm}
      \pgfmoveto{\pgfpoint{0mm}{0mm}}
      \pgflineto{\pgfpoint{0mm}{87.5mm}}
      \pgflineto{\pgfpoint{94.8mm}{87.5mm}}
      \pgflineto{\pgfpoint{119.7mm}{0mm}}
      \pgfclip
      \color{main.colour}
      % \color{magenta}
     \pgfrect[fill]{\pgfpoint{0mm}{0mm}}{\pgfpoint{119.7mm}{87.5mm}}
      % \pgfgrid[stepx = 1mm, stepy = 1mm]{\pgfpoint{0mm}{0mm}}{\pgfpoint{119.7mm}{87.5mm}}
    \end{pgfpicture}
  \end{textblock}

  \begin{textblock}{29.2}(7.5, 7.5)
    \includegraphics[width = 12.7mm]{vlaanderen_en_verticaal.eps}
  \end{textblock}

  \begin{textblock}{66}(36, 32)
    \begin{minipage}[b][29mm][b]{65mm}
      \noindent
      \raggedright{\usebeamerfont{section title}\usebeamercolor[fg]{section title}\insertsection}
    \end{minipage}
  \end{textblock}

  \begin{textblock}{78}(36, 63)
    {\usebeamerfont{subsection title}\usebeamercolor[fg]{subsection title}\insertsubsection}
  \end{textblock}
}

\setbeamertemplate{block begin}{
  \vskip2mm
  \begin{beamercolorbox}[leftskip = 10mm, colsep = 1mm]{block title}%
    \usebeamerfont*{block title}\insertblocktitle
  \end{beamercolorbox}%
  \vskip-0.5mm
  \pgfsetfillopacity{0.5}
  \usebeamerfont{block body}%
  \begin{beamercolorbox}[vmode, colsep = 1mm]{block body}%
    \ifbeamercolorempty[bg]{block body}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
  }
  \setbeamertemplate{block end}{
  \end{beamercolorbox}
  \pgfsetfillopacity{1}
}

\setbeamertemplate{block example begin}{
  \vskip2mm
  \begin{beamercolorbox}[leftskip = 10mm, colsep = 1mm]{block title example}%
    \usebeamerfont*{block title example}\insertblocktitle
  \end{beamercolorbox}%
  \vskip-0.5mm
  \pgfsetfillopacity{0.5}
  \usebeamerfont{block body example}%
  \begin{beamercolorbox}[vmode, colsep = 1mm]{block body example}%
    \ifbeamercolorempty[bg]{block body example}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
  }
  \setbeamertemplate{block example end}{
  \end{beamercolorbox}
  \pgfsetfillopacity{1}
}

\setbeamertemplate{block alerted begin}{
  \vskip2mm
  \begin{beamercolorbox}[leftskip = 10mm, colsep = 1mm]{block title alerted}%
    \usebeamerfont*{block title alerted}\insertblocktitle
  \end{beamercolorbox}%
  \vskip-0.5mm
  \pgfsetfillopacity{0.5}
  \usebeamerfont{block body alerted}%
  \begin{beamercolorbox}[vmode, colsep = 1mm]{block body alerted}%
    \ifbeamercolorempty[bg]{block body alerted}{\vskip-.25ex}{\vskip-.75ex}\vbox{}%
  }
  \setbeamertemplate{block alerted end}{
  \end{beamercolorbox}
  \pgfsetfillopacity{1}
}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{footline}[frame number]

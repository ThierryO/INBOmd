# Inserting and executing R code with RMarkdown

You can find an R code chunk below this paragraph. Adding a new code chunk is easy in RStudio by pressing `Ctrl + Alt + I`.

```{r linear_model}
model <- lm(log(pressure) ~ poly(temperature, 2), data = pressure)
summary(model)
```

## Adding figures {#S:figures}

Adding R figures is easy (figure \@ref(fig:pressure)). The `echo = FALSE` argument was added to the chunk options. This hides the R code that generates the figure. The `fig.cap` argument adds a caption to the figure. The default label is a `fig:` prefix followed by the name of the chunk.

```{r pressure, echo = FALSE, fig.cap = "The caption"}
ggplot(pressure, aes(x = temperature, y = pressure)) + 
  geom_smooth(method = "lm", formula = y ~ poly(x, 2)) +
  geom_point() +
  scale_x_continuous("Temperature (deg C)") +
  scale_y_log10("Pressure (mm of Hg)") +
  ggtitle("pressure data: Vapor Pressure of Mercury")
```

## Adding tables {#S:tables}

`kable()` is a handy function to display dataframes as a table (table \@ref(tab:kabletable)). The table will get a default label which is the prefix `tab:` plus the chunk name. Hence you can display only one table per chunk. Note that we need the argument `results='asis'`.

```{r kabletable, results='asis'}
kable(
  pressure,
  booktabs = TRUE,
  caption = "The caption of a Markdown table"
)
```

When you want tables to break across multiple pages, add `longtable = TRUE` to the `kable()` function (table \@ref(tab:longtable)).
Note that the `booktabs` and `longtable` arguments only affect PDF output formats.

```{r longtable, results='asis'}
kable(
  pressure,
  booktabs = TRUE,
  longtable = TRUE,
  caption = "The caption of a Markdown table"
)
```
